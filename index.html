<!DOCTYPE html>
<html lang="es">
<head>

    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>¬°Nos Casamos!</title>
  <meta name="description" content="Invitaci√≥n de casamiento: informaci√≥n, mapa, dress code, lista de regalos, fotos y confirmaci√≥n de asistencia." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
  :root {
    --bg: #faf7f5;
    --text: #2a2a2a;
    --muted: #6b6b6b;
    --brand: #b98c6d;
    --brand-2: #5b6b6f;
    --card: #ffffff;
    --ring: rgba(185,140,109,.35);
  }

  * { box-sizing: border-box; }

  html, body {
    margin: 0;
    padding: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
  }

  h1, h2, h3 {
    font-family: "Playfair Display", serif;
    margin: 0 0 .5rem;
  }

  a { color: var(--brand); }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 24px;
  }

  .card {
    background: var(--card);
    border-radius: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,.05);
    padding: 24px;
  }

  header.hero {
    position: relative;
    isolation: isolate;
    padding: 48px 0 24px;
    background: linear-gradient(180deg, #fff 0%, #fff6 30%, transparent 100%);
  }

  .hero-inner {
    display: grid;
    grid-template-columns: 1.1fr .9fr;
    gap: 28px;
    align-items: center;
  }

  .tag {
    display: inline-block;
    background: #00000008;
    border: 1px solid #00000010;
    padding: 6px 10px;
    border-radius: 999px;
    color: var(--muted);
    font-size: .9rem;
  }

  .title {
    font-size: clamp(36px,5vw,58px);
    line-height: 1.05;
  }

  .subtitle {
    color: var(--muted);
    margin-top: .25rem;
  }

  .cta-row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 18px;
  }

  .btn {
    appearance: none;
    border: 0;
    border-radius: 12px;
    padding: 12px 16px;
    font-weight: 600;
    cursor: pointer;
  }

  .btn.brand {
    background: var(--brand);
    color: white;
  }

  .btn.ghost {
    background: #0000;
    border: 1px solid #00000022;
    color: var(--text);
  }

  .grid {
    display: grid;
    gap: 18px;
  }

  .grid-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .section {
    margin: 28px 0;
  }

  .list {
    padding-left: 18px;
    color: var(--muted);
  }

  .timeline {
    display: grid;
    gap: 10px;
    color: var(--muted);
  }

  .item {
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 12px;
  }

  iframe {
    border: 0;
    border-radius: 12px;
    width: 100%;
    min-height: 320px;
  }

  form label {
    font-weight: 600;
    display: block;
    margin: .25rem 0;
  }

  input, select, textarea {
    width: 100%;
    padding: 12px 14px;
    border-radius: 12px;
    border: 1px solid #e7e2df;
    background: white;
    box-shadow: 0 0 0 0 transparent;
    outline: none;
  }

  input:focus, select:focus, textarea:focus {
    box-shadow: 0 0 0 4px var(--ring);
  }

  .foot {
    color: var(--muted);
    text-align: center;
    margin: 26px 0 50px;
  }

  .pill {
    display: inline-flex;
    gap: 8px;
    align-items: center;
    padding: 8px 12px;
    border-radius: 999px;
    background: #f0f4f6;
    border: 1px solid #d9e0e3;
    color: #314046;
  }

  #downloadCsv {
    display: none;
  }

  @media (max-width: 860px) {
    .hero-inner {
      grid-template-columns: 1fr;
    }
    .grid-2 {
      grid-template-columns: 1fr;
    }
    .item {
      grid-template-columns: 1fr;
    }
  }
</style>

</head>
<body>
  <header class="hero">
    <div class="container hero-inner">
      <div>
        <span class="tag">¬°Est√°s invitad@!</span>
        <h1 class="title">Gabriel &amp; D√°maris</h1>
        <p class="subtitle">Nos casamos y queremos celebrarlo con vos ‚ô• </p>
        <div class="cta-row">
          <a class="btn brand" href="#rsvp">Confirmar asistencia</a>
          <a class="btn ghost" href="#info">Ver detalles</a>
        </div>
        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
          <span class="pill" title="Fecha"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 2v3M17 2v3M3 9h18M5 5h14a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" stroke="#5b6b6f" stroke-width="2"/></svg> 10 ‚Ä¢ Enero ‚Ä¢ 2026</span>
          <span class="pill" title="Hora"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 8v5l3 2" stroke="#5b6b6f" stroke-width="2"/><circle cx="12" cy="12" r="9" stroke="#5b6b6f" stroke-width="2"/></svg> 19:30 h</span>
          <span class="pill" title="Ubicaci√≥n"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s7-6.2 7-11a7 7 0 1 0-14 0c0 4.8 7 11 7 11Z" stroke="#5b6b6f" stroke-width="2"/><circle cx="12" cy="10" r="2.5" stroke="#5b6b6f" stroke-width="2"/></svg> Aires del Sauzal </span>
        </div>
      </div>
      <div>
        <div class="card">
          <h2 style="margin-bottom:.25rem">Mapa del evento</h2>
          <iframe title="Mapa del evento" loading="lazy" allowfullscreen src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3351.2163598185566!2d-68.75207568925364!3d-32.86599446770876!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x967e0fb2a1d297fd%3A0xdb24486077b1fb85!2sAires%20del%20Sauzal!5e0!3m2!1ses-419!2sar!4v1760657692585!5m2!1ses-419!2sar" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </div>
  </header>

  <main class="container" id="info">
    <section class="section grid grid-2">
      <div class="card">
        <h2>Agenda</h2>
        <div class="timeline" aria-label="Cronograma del evento">
          <div class="item"><strong>19:30</strong><span>Recepci√≥n de invitados</span></div>
          <div class="item"><strong>20:00</strong><span>Ceremonia</span></div>
          <div class="item"><strong>20:30</strong><span>Brindis y fotos</span></div>
          <div class="item"><strong>21:00</strong><span>Entrada, cena y fiesta üéâ</span></div>
        </div>
      </div>
      <div class="card">
        <h2>Dress code</h2>
        <p class="subtitle">Sugerimos elegante sport en paleta neutra o colores pasteles. Evitando el blanco y beige total para no opacar a los novios ‚ô•.</p>
      </div>
    </section>

    <section class="section grid grid-2">
      <div class="card">
        <h2>Lista de regalos</h2>
        <p class="subtitle">Puedes consultar nuestra lista y aportar con lo que desees.</p>
        <p><a class="btn brand" href="https://docs.google.com/spreadsheets/d/1XYZtX1ns5-eC3MQUSQtVQ8PH14acbwNv06EyNCakZbc/edit?usp=sharing" target="_blank" rel="noopener">Abrir lista de regalos</a></p>
      </div>
      <div class="card">
        <h2>Fotos &amp; videos</h2>
        <p class="subtitle">Comparte tus recuerdos subi√©ndolos a nuestra carpeta.</p>
        <p><a class="btn ghost" href="https://drive.google.com/drive/folders/1fwS65xL7tkW6GEC_53rcbI12NBH5coAU?usp=sharing" target="_blank" rel="noopener">Subir fotos / videos</a></p>
      </div>
    </section>

    <section class="section">
      <div class="card" id="rsvp">
        <h2>Confirmaci√≥n de asistencia (RSVP)</h2>
        <p class="subtitle">Por favor, completa tus datos.</p>
        <form id="rsvpForm">
          <div class="grid grid-2">
            <div>
              <label for="nombre">Nombre</label>
              <input id="nombre" name="nombre" required />
            </div>
            <div>
              <label for="apellido">Apellido</label>
              <input id="apellido" name="apellido" required />
            </div>
          </div>
          <div class="grid grid-2" style="margin-top:12px">
            <div>
              <label for="asistencia">¬øAsistir√°s?</label>
              <select id="asistencia" name="asistencia" required>
                <option value="">Selecciona‚Ä¶</option>
                <option value="S√≠">S√≠ asistir√©</option>
                <option value="No">No podr√© asistir</option>
              </select>
            </div>
            <div>
              <label for="restriccion">Restricci√≥n alimentaria (opcional)</label>
              <input id="restriccion" name="restriccion" placeholder="Ej.: vegetariana" />
            </div>
          </div>
          <div style="margin-top:12px">
            <label for="mensaje">Mensaje</label>
            <textarea id="mensaje" name="mensaje" rows="3"></textarea>
          </div>
          <div class="cta-row" style="margin-top:16px">
            <button class="btn brand" type="submit">Enviar confirmaci√≥n</button>
            <button class="btn ghost" type="button" id="downloadCsv">Descargar como CSV</button>
          </div>
        </form>
      </div>
    </section>
  </main>

  <footer class="foot">
    <div class="container">
      <small>Hecho con ‚ô• ‚Äî üìç Cr√©ditos: Dise√±o creado por D√°maris & Gabriel, 2025.</small>
    </div>
  </footer>

     <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

  <script>
    // Inicializar EmailJS con tu Public Key
    emailjs.init("3N20muwjzcolKStQY"); // üëà reemplaza si cambia tu clave

    const form = document.getElementById("rsvpForm");
    const downloadBtn = document.getElementById("downloadCsv");

    // --- Env√≠o del formulario + validaci√≥n + mensaje personalizado ---
    form.addEventListener("submit", async (event) => {
      event.preventDefault();

      const nombre = document.getElementById("nombre").value.trim();
      const apellido = document.getElementById("apellido").value.trim();
      const restriccion = document.getElementById("restriccion").value.trim();
      const asistencia = document.getElementById("asistencia").value;

      // Validaci√≥n de campos obligatorios
      if (!nombre || !apellido || !asistencia) {
        alert("Por favor, complet√° todos los campos obligatorios.");
        return;
      }

      try {
        // Enviar con EmailJS
        await emailjs.sendForm("service_3exflyy", "template_6qunc5y", form);

        // Mostrar mensaje personalizado
        const mensaje = `
üíå ¬°Gracias, ${nombre} ${apellido}!
${asistencia === "S√≠"
  ? "‚ú® ¬°Nos alegra que vengas a celebrar con nosotros! üíï"
  : "üò¢ Lamentamos que no puedas venir, igual te tendremos presente üíñ"}
${restriccion ? `\nü•ó Restricci√≥n alimentaria: ${restriccion}` : ""}
        `;

        alert(mensaje);
        form.reset();
      } catch (error) {
        console.error("Error al enviar:", error);
        alert("‚ùå Ocurri√≥ un error al enviar el formulario. Intenta m√°s tarde.");
      }
    });

    // --- Mostrar bot√≥n CSV solo si hay clave secreta ---
    const params = new URLSearchParams(window.location.search);
    const adminKey = params.get("admin");
    const CLAVE_SECRETA = "12345"; // üîê c√°mbiala si quer√©s otra clave

    if (adminKey === CLAVE_SECRETA) {
      downloadBtn.style.display = "inline-block";
    }

    // --- Generar descarga CSV solo visible para admin ---
    downloadBtn.addEventListener("click", () => {
      const stored = JSON.parse(localStorage.getItem("rsvp_list") || "[]");
      if (!stored.length) {
        alert("No hay respuestas a√∫n.");
        return;
      }
      const headers = ["timestamp","nombre","apellido","asistencia","restriccion","mensaje"];
      const csv = [headers.join(",")]
        .concat(
          stored.map((r) =>
            headers.map((h) => `"${(r[h] || "").replaceAll('"', '""')}"`).join(",")
          )
        )
        .join("\n");

      const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "rsvp.csv";
      a.click();
      URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>

